{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans 'Activity Stream' %} &mdash; {{ block.super }}{% endblock %}

{% block content %}
<div class="l-wrapper">
    <div class="l-center-6">
        <h1>{% trans 'Activity Stream' %}</h1>

        {% for activity in object_list|slice:":10" %}
            <div class="activity">
                <i class="fa fa-{{ activity.icon }} activity__icon" aria-hidden="true"></i>
                <div class="activity__main">
                    <div class="activity__line">
                        {% if activity.type == 'comment' %}
                            <a href="{% url 'profile' activity.actor.username %}">{{ activity.actor.username }}</a>
                            commented: {{ activity.obj.comment|truncatechars_html:50 }}
                        {% elif activity.type == 'item' %}
                            <a href="{% url 'profile' activity.actor.username %}">{{ activity.actor.username }}</a> added a new item
                        {% elif activity.type == 'phase' and activity.verb == 'schedule' %}
                            Participation will be over soon
                        {% else %}
                            No such actions yet
                        {% endif %}
                    </div>
                    <div class="activity__line">
                        on <a href="{% url 'project-detail' activity.project.slug %}">{{ activity.project.name }}</a>
                    </div>
                    <div class="activity__date">{{ activity.timestamp|date:'d.m.Y' }}</div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
