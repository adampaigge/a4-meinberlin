{% extends 'meinberlin_projects/project_detail.html' %}
{% load i18n rules static maps_tags %}

{% block project_action %}
    {% has_perm 'meinberlin_topicprio.create_topic' request.user view as add_allowed %}
    {% if add_allowed %}
        <a href="{% url 'meinberlin_topicprio:topic-create' slug=view.module.slug %}" class="button button--huge">
            {% trans 'Add Topic' %}
        </a>
    {% endif %}
{% endblock %}

{% block phase_content %}
    {% has_perm 'meinberlin_topicprio.create_topic' request.user view as add_allowed %}
    {% if add_allowed %}
        <div class="list list--highlight">
            <div class="l-wrapper">
                <div class="l-center-8">
                    {% include "meinberlin_contrib/includes/filter_and_sort.html" with filter=view.filter %}

                    <div class="list__container">
                        {% for object in object_list %}
                            {% include "meinberlin_topicprio/includes/topic_list_item.html" with object=object %}
                        {% endfor %}
                    </div>

                    {% if object_list.count == 0 %}
                        {% trans "Nothing to show" %}
                    {% endif %}
                    {% include "meinberlin_contrib/includes/pagination.html" %}
                </div>
            </div>
        </div>
    {% else %}
        <div class="list list--highlight">
            <div class="l-wrapper">
                <div class="l-center-8">
                    {% trans 'Topics are being created.' %}
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}
